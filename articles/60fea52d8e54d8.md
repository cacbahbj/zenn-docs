---
title: "Macã§Kubernetes"
emoji: "ğŸ‘Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["kubernetes", "mac"]
published: false
---
# Kubernetesã¨ã¯

Kubernetesã‚’ã“ã‚Œã‹ã‚‰å§‹ã‚ã‚‹ã¨ã„ã†æ–¹ã«ã¯ã€ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒœã‚¦ã‚ºç ”ä¿®è³‡æ–™ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™
https://cybozu.github.io/introduction-to-kubernetes/

å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã“ã“ã§ã™
https://kubernetes.io/ja/docs/home/

# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã™ãŸã‚ã«ã¯ä¸»ã«ä»¥ä¸‹ã®2ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™

- Minikube
- Docker for mac

ä»Šå›ã¯èµ·å‹•æ™‚ã«Kubernetesã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæŒ‡å®šã§ãã‚‹Minikubeã‚’ä½¿ã„ã¾ã™

https://kubernetes.io/ja/docs/setup/learning-environment/minikube/
https://docs.docker.com/desktop/kubernetes/

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```
$ brew install minikube
```

## èµ·å‹•ã€åœæ­¢ã€å‰Šé™¤

```
$ minikube start --kubernetes-version v1.22.0
$ minikube stop
$ minikube delete --all
```

## ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ³ã‚’GUIã§ç¢ºèªã§ãã‚‹
```
$ minikube dashboard
```

# Kustomize

Kubernetes1.14ä»¥é™ã¯kubectlã‚³ãƒãƒ³ãƒ‰ã«çµ±åˆã•ã‚ŒãŸã®ã§ã™ãŒã€
å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã„ãŸã„å ´åˆã¯è‡ªåˆ†ã§å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

```
$ cd ~/bin
$ curl -s "https://raw.githubusercontent.com/kubernetes-sigs/kustomize/master/hack/install_kustomize.sh"  | bash -s -- 3.8.10
```
`~/.zshrc`ã‚’ç·¨é›†ã—ã¦ãƒ‘ã‚¹ã‚’é€šã—ã¦ãŠãã¾ã™
```
$ vi ~/.zshrc
export PATH="$HOME/bin:$PATH"

$ source ~/.zshrc
```
YAMLã‚’ç”Ÿæˆã—ãŸã‚Šã€ç›´æ¥applyã§ãã¾ã™
```
$ kustomize build ~/someApp
$ kustomize build ~/someApp | kubectl apply -f -
```

è©³ç´°ã¯ä»¥ä¸‹å‚ç…§
https://github.com/kubernetes-sigs/kustomize
https://kubectl.docs.kubernetes.io

kubectlã‹ã‚‰ä½¿ã†å ´åˆã¯ã“ã¡ã‚‰
https://kubernetes.io/docs/tasks/manage-kubernetes-objects/kustomization/

#
